{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://course-assistant.schema/module_package.json",
  "title": "Module Package Schema",
  "description": "Simplified schema for module manifest files within module packages. Uses new naming convention: {CourseID}_M{NN}.manifest.md",
  "type": "object",
  "required": ["metadata", "overview", "file_inventory"],
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["course_id", "term_id", "course_run_id", "module_id", "doc_type", "last_updated"],
      "properties": {
        "course_id": {
          "type": "string",
          "pattern": "^[A-Z]{2,10}[0-9]{3,5}$",
          "description": "Course code only, e.g., MKTG6051, MGMT6022"
        },
        "term_id": {
          "type": "string",
          "pattern": "^(20\\d{2})-(FA|SP|SU|WI)$"
        },
        "course_run_id": {
          "type": "string",
          "pattern": "^[A-Z]{2,10}[0-9]{3,5}-20[0-9]{2}-(FA|SP|SU|WI)$",
          "description": "Course instance identifier: {course_id}-{term_id}"
        },
        "module_id": {
          "type": "string",
          "pattern": "^(M\\d{2}|GK)$",
          "description": "Module identifier: M01-M99 or GK for course-level materials"
        },
        "module_title": {
          "type": "string"
        },
        "doc_type": {
          "type": "string",
          "enum": ["module_manifest"]
        },
        "last_updated": {
          "type": "string",
          "pattern": "^(20\\d{2})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$"
        }
      }
    },
    "overview": {
      "type": "object",
      "required": ["description"],
      "properties": {
        "description": {
          "type": "string",
          "description": "Brief 2-3 sentence description of what this module covers"
        },
        "learning_objectives": {
          "type": "array",
          "items": {
            "type": "string"
          }
        },
        "estimated_time_hours": {
          "type": "number",
          "minimum": 0
        }
      }
    },
    "file_inventory": {
      "type": "array",
      "description": "List of files using new naming convention: {CourseID}_M{NN}.{TypeCode}_{short-description}.{extension}",
      "items": {
        "type": "object",
        "required": ["file_path", "file_type", "description"],
        "properties": {
          "file_path": {
            "type": "string",
            "description": "Relative path to file within module folder. Should follow pattern: {CourseID}_M{NN}.{TypeCode}_{short-description}.{extension} where TypeCode is A (Assignment), L (Lecture), R (Resource), or B (Business case)"
          },
          "file_type": {
            "type": "string",
            "enum": [".md", ".txt", ".csv", ".xlsx", ".pdf", ".pptx", ".docx"],
            "description": "Allowed file types"
          },
          "type_code": {
            "type": "string",
            "enum": ["A", "L", "R", "B"],
            "description": "Type code: A=Assignment, L=Lecture, R=Resource, B=Business case"
          },
          "description": {
            "type": "string"
          },
          "required": {
            "type": "boolean",
            "default": true
          }
        }
      }
    },
    "assignment_links": {
      "type": "array",
      "description": "References to assignments associated with this module",
      "items": {
        "type": "object",
        "required": ["assignment_id", "title"],
        "properties": {
          "assignment_id": {
            "type": "string",
            "pattern": "^[A-Z]+-?\\d{2}(-[A-Z0-9]+)?$"
          },
          "title": {
            "type": "string"
          },
          "type": {
            "type": "string",
            "enum": ["individual", "quiz", "discussion", "exam", "group", "presentation"]
          }
        }
      }
    },
    "notes": {
      "type": "string",
      "description": "Optional instructor notes"
    }
  }
}
