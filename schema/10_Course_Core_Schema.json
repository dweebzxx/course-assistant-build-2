{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://course-assistant.schema/course_core.json",
  "title": "Course Core File Schema",
  "description": "Schema for course-core.md Grounded Knowledge File - Tier 1 authority (highest) for syllabus, policies, grading, structure, and group project definition. Filename pattern: {course_id}_GK_course-core.md",
  "type": "object",
  "required": ["metadata", "course_identification", "course_syllabus", "grading_policy", "course_policies"],
  "properties": {
    "metadata": {
      "type": "object",
      "required": ["course_id", "term_id", "course_run_id", "doc_type", "last_updated", "timezone"],
      "properties": {
        "course_id": {
          "type": "string",
          "pattern": "^[A-Z]{2,10}[0-9]{3,5}$",
          "description": "Course code only, e.g., MGMT6022"
        },
        "term_id": {
          "type": "string",
          "pattern": "^(20\\d{2})-(FA|SP|SU|WI)$",
          "description": "Academic term identifier"
        },
        "course_run_id": {
          "type": "string",
          "pattern": "^[A-Z]{2,10}[0-9]{3,5}-20[0-9]{2}-(FA|SP|SU|WI)$",
          "description": "Course instance identifier: {course_id}-{term_id}"
        },
        "doc_type": {
          "type": "string",
          "enum": ["course_core"],
          "description": "Document type identifier"
        },
        "last_updated": {
          "type": "string",
          "pattern": "^(20\\d{2})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$",
          "description": "ISO date of last update (YYYY-MM-DD)"
        },
        "timezone": {
          "type": "string",
          "description": "IANA timezone name or abbreviation",
          "examples": ["America/Chicago", "CT"]
        },
        "source_files": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Original source filenames"
        },
        "change_log": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["date", "change"],
            "properties": {
              "date": {
                "type": "string",
                "pattern": "^(20\\d{2})-(0[1-9]|1[0-2])-(0[1-9]|[12][0-9]|3[01])$"
              },
              "change": {
                "type": "string"
              }
            }
          }
        }
      }
    },
    "course_identification": {
      "type": "object",
      "required": ["course_title", "course_code", "term", "instructor"],
      "properties": {
        "course_title": {
          "type": "string"
        },
        "course_code": {
          "type": "string"
        },
        "section": {
          "type": "string"
        },
        "term": {
          "type": "string"
        },
        "instructor": {
          "type": "object",
          "required": ["name"],
          "properties": {
            "name": {
              "type": "string"
            },
            "email": {
              "type": "string",
              "format": "email"
            },
            "office_hours": {
              "type": "string"
            }
          }
        }
      }
    },
    "course_syllabus": {
      "type": "object",
      "description": "Complete course syllabus content - Tier 1 authoritative source",
      "properties": {
        "syllabus_overview": {
          "type": "string",
          "description": "Complete syllabus text or summary"
        },
        "syllabus_version": {
          "type": "string",
          "description": "Version number or date of syllabus"
        },
        "key_syllabus_points": {
          "type": "array",
          "items": {
            "type": "string"
          },
          "description": "Major points from the syllabus"
        }
      }
    },
    "grading_policy": {
      "type": "object",
      "required": ["components"],
      "properties": {
        "components": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["component", "weight"],
            "properties": {
              "component": {
                "type": "string"
              },
              "weight": {
                "type": "number",
                "minimum": 0,
                "maximum": 100
              },
              "description": {
                "type": "string"
              }
            }
          }
        },
        "grading_scale": {
          "type": "array",
          "items": {
            "type": "object",
            "required": ["grade", "min_percentage"],
            "properties": {
              "grade": {
                "type": "string"
              },
              "min_percentage": {
                "type": "number"
              },
              "max_percentage": {
                "type": "number"
              }
            }
          }
        }
      }
    },
    "course_policies": {
      "type": "object",
      "properties": {
        "attendance": {
          "type": "string"
        },
        "late_work": {
          "type": "string"
        },
        "academic_integrity": {
          "type": "string"
        },
        "participation": {
          "type": "string"
        },
        "technology": {
          "type": "string"
        },
        "accommodations": {
          "type": "string"
        }
      }
    },
    "course_structure": {
      "type": "object",
      "properties": {
        "format": {
          "type": "string"
        },
        "module_count": {
          "type": "integer"
        },
        "duration_weeks": {
          "type": "integer"
        }
      }
    },
    "group_project_context": {
      "type": "object",
      "description": "Group project definition at course level and student assignment",
      "properties": {
        "group_project_required": {
          "type": "boolean",
          "description": "Whether a group project is required for this course"
        },
        "project_id": {
          "type": ["string", "null"],
          "pattern": "^(GP\\d{2}|PROJ-[A-Z0-9\\-]+)$",
          "description": "Project identifier if applicable"
        },
        "project_scope": {
          "type": ["string", "null"],
          "description": "Brief description of the project"
        },
        "team_size": {
          "type": ["string", "null"],
          "description": "Expected team size, e.g., 4-5 students"
        },
        "student_assignment": {
          "type": "object",
          "description": "Josh's specific assignment to the group project",
          "properties": {
            "assigned_to_group_project": {
              "type": "boolean"
            },
            "team_name": {
              "type": ["string", "null"]
            },
            "role": {
              "type": ["string", "null"],
              "description": "Josh's role in the project"
            }
          }
        }
      }
    }
  }
}
